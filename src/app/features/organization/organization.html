<app-panel-page-wrapper>
  <app-panel-page-header [title]="'organization.title' | translate" />
  <p-toast />

  <div class="grid grid-cols-12">
  <div class="col-span-12 md:col-span-8">
    <p-panel>
      <form [formGroup]="form" (ngSubmit)="onSubmit()" class="grid grid-cols-12 gap-form-grid">
        @if (form.controls.logoUrl.value) {
        <div class="col-span-12">
          <div class="mb-3">
            <span class="text-sm text-muted-color mb-2 block"
              >{{ 'organization.form.currentLogo' | translate }}:</span
            >
            <div class="flex items-center gap-3 p-3 border border-surface rounded-border">
              <img
                [src]="form.controls.logoUrl.value"
                [alt]="'organization.form.logo' | translate"
                class="max-w-[120px] max-h-[120px] object-contain"
                (error)="$event.target.style.display = 'none'"
              />
            </div>
          </div>
        </div>
        }
        <div class="col-span-12">
          <app-form-field-container>
            <label for="logo">{{ 'organization.form.logo' | translate }}</label>
            <p-fileUpload
              #fileUpload
              mode="basic"
              [customUpload]="true"
              accept="image/*"
              [maxFileSize]="5000000"
              [disabled]="loading() || saving()"
              (uploadHandler)="onLogoUpload($event)"
              (onSelect)="onLogoSelect($event)"
              chooseLabel="{{ 'organization.form.chooseLogo' | translate }}"
              [auto]="false"
              styleClass="w-full"
            />

            <app-form-field-error [control]="form.controls.logoUrl" />
          </app-form-field-container>
        </div>

        <div class="col-span-12">
          <app-form-field-container>
            <label for="name">{{ 'organization.form.name' | translate }}</label>
            <input
              class="w-full"
              pInputText
              type="text"
              id="name"
              formControlName="name"
              [disabled]="loading()"
            />
            <app-form-field-error [control]="form.controls.name" />
          </app-form-field-container>
        </div>

        <div class="col-span-12">
          <app-form-field-container>
            <label for="description">{{ 'organization.form.description' | translate }}</label>
            <textarea
              class="w-full"
              pInputTextarea
              id="description"
              formControlName="description"
              [rows]="4"
              [disabled]="loading()"
            ></textarea>
            <app-form-field-error [control]="form.controls.description" />
          </app-form-field-container>
        </div>

        <div class="col-span-12 md:col-span-6">
          <app-form-field-container>
            <label for="websiteUrl">{{ 'organization.form.websiteUrl' | translate }}</label>
            <input
              class="w-full"
              pInputText
              type="url"
              id="websiteUrl"
              formControlName="websiteUrl"
              [disabled]="loading()"
            />
            <app-form-field-error [control]="form.controls.websiteUrl" />
          </app-form-field-container>
        </div>

        <div class="col-span-12">
          <app-form-field-container>
            <label for="email">{{ 'organization.form.email' | translate }}</label>
            <input
              class="w-full"
              pInputText
              type="email"
              id="email"
              formControlName="email"
              [disabled]="loading()"
            />
            <app-form-field-error [control]="form.controls.email" />
          </app-form-field-container>
        </div>

        <div class="col-span-12">
          <app-form-field-container>
            <label for="phoneNumber">{{ 'organization.form.phoneNumber' | translate }}</label>
            <app-phone-input [formControl]="form.controls.phoneNumber" class="w-full" />
            <app-form-field-error [control]="form.controls.phoneNumber" />
          </app-form-field-container>
        </div>

        <div class="col-span-12 flex justify-end gap-2">
          <p-button
            type="button"
            severity="secondary"
            [label]="'common.reset' | translate"
            (onClick)="onReset()"
            [disabled]="loading() || saving()"
          />
          <p-button
            type="submit"
            icon="pi pi-save"
            [label]="'common.save' | translate"
            [loading]="saving()"
            [disabled]="loading() || form.invalid"
          />
        </div>
      </form>
    </p-panel>
  </div>
</div>
</app-panel-page-wrapper>
